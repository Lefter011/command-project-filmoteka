{"mappings":"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","sources":["src/js/utils/refs.js","src/js/pagination/pagination.js","src/js/pagination/io.js","src/js/header-search.js","src/js/hero.js","src/js/modal-card-film/save-films-to-storage.js","src/js/pagination/pagin-search.js"],"sourcesContent":["//refs\n//Button-up\nconst buttonUpRef = document.querySelector('.button--up');\n\n//Gallery main container\nconst containerGallery = document.querySelector('.js-gallery');\n\n//Pagination container\nconst containerPag = document.querySelector('.pag');\n\n//Searching form\nconst searchFormRef = document.querySelector('.search-form');\n\nconst inputRef = document.querySelector('input.js-search')\n\n// movie card in Modal\nconst movieCardModalRef = document.querySelector('.js-movie-card');\n\n// modal team content\nconst accordionRef = document.querySelector('#accordion');\n\n// spinner\nconst spinnerRef = document.querySelector('.js-spinner');\n\n// Header\nconst headerRef = document.querySelector('#header');\n\nconst notifyARef = document.querySelector('.alert-a');\nconst notifyBRef = document.querySelector('.alert-b');\n\n// Library\nconst headerButtonsContainerRef = document.querySelector('.header-buttons');\n\nconst headerButtonsRef = document.querySelectorAll('.header-button');\n\nexport {\n  buttonUpRef,\n  containerGallery,\n  containerPag,\n  searchFormRef,\n  inputRef,\n  movieCardModalRef,\n  accordionRef,\n  spinnerRef,\n  headerRef,\n  headerButtonsContainerRef,\n  headerButtonsRef,\n  notifyARef,\n  notifyBRef,\n};\n","import ApiService from '../ApiService';\nimport { containerGallery, inputRef } from '../utils/refs';\nimport { createMarkup } from '../utils/createMarkup';\nimport { clearMarkup } from '../header-search';\n\nconst api = new ApiService();\n\nconst butPlus = document.querySelector('.button2');\nconst butMinus = document.querySelector('.button1');\n\nbutPlus.addEventListener('click', onButtonClickPlus);\nbutMinus.addEventListener('click', onButtonClickMinus);\n\nconst btn1Ref = document.querySelector('[data-index=\"1\"]');\nconst btn2Ref = document.querySelector('[data-index=\"2\"]');\nconst btn3Ref = document.querySelector('[data-index=\"3\"]');\nconst btn4Ref = document.querySelector('[data-index=\"4\"]');\nconst btn5Ref = document.querySelector('[data-index=\"5\"]');\nconst btn6Ref = document.querySelector('[data-index=\"6\"]');\n\nbtn1Ref.addEventListener('click', clickToPage1);\nbtn2Ref.addEventListener('click', clickToPage2);\nbtn3Ref.addEventListener('click', clickToPage3);\nbtn4Ref.addEventListener('click', clickToPage4);\nbtn5Ref.addEventListener('click', clickToPage5);\nbtn6Ref.addEventListener('click', clickToPage6);\n\nbtn1Ref.hidden = true;\nbtn2Ref.hidden = true;\nbtn5Ref.hidden = true;\n\nbtn3Ref.textContent = 2;\nbtn4Ref.textContent = 3;\nbtn5Ref.textContent = 1;\nbtn6Ref.textContent = 1000;\n\nlet currentPage = 1;\n\nexport async function onButtonClickPlus() {\n  currentPage += 1;\n  renderPage();\n  checkPageNumber();\n}\n\nasync function onButtonClickMinus() {\n  if (currentPage != 1) {\n    currentPage -= 1;\n    renderPage();\n    checkPageNumber();\n  } else {\n    return console.log('error');\n  }\n}\n\nasync function clickToPage1() {\n  currentPage = Number(document.querySelector('[data-index=\"1\"]').textContent);\n  checkPageNumber();\n  return renderPage();\n}\n\nasync function clickToPage2() {\n  currentPage = Number(document.querySelector('[data-index=\"2\"]').textContent);\n  checkPageNumber();\n  return renderPage();\n}\n\nasync function clickToPage3() {\n  currentPage = Number(document.querySelector('[data-index=\"3\"]').textContent);\n  checkPageNumber();\n  return renderPage();\n}\n\nasync function clickToPage4() {\n  currentPage = Number(document.querySelector('[data-index=\"4\"]').textContent);\n  checkPageNumber();\n  return renderPage();\n}\n\nasync function clickToPage5() {\n  currentPage = 1;\n  checkPageNumber();\n\n  btn3Ref.hidden = false;\n  btn4Ref.hidden = false;\n  butMinus.hidden = true;\n  butPlus.hidden = false;\n  btn6Ref.hidden = false;\n\n  btn3Ref.textContent = Number(currentPage) + 1;\n  btn4Ref.textContent = Number(currentPage) + 2;\n  return renderPage();\n}\n\nasync function clickToPage6() {\n  currentPage = btn6Ref.textContent;\n  checkPageNumber();\n\n  butMinus.hidden = false;\n  btn5Ref.hidden = false;\n\n  return renderPage();\n}\n\nasync function renderPage() {\n  try {\n    if (inputRef.value !== '') {\n      const res = await api.getMoviesByName(inputRef.value, currentPage);\n      const data = res.results;\n      const markup = createMarkup(data);\n      clearMarkup();\n      btn6Ref.hidden = true;\n      containerGallery.innerHTML = markup;\n      \n    } else {\n      const res = await api.fetchTrendingMovies(currentPage);\n      const data = res.data.results;\n      const markup = createMarkup(data);\n      clearMarkup();\n      containerGallery.innerHTML = markup;\n    }\n\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n    document.getElementById('currentPage').textContent = currentPage;\n  } catch (error) {\n    console.error('Error with search fetch' + error);\n  }\n}\n\nasync function checkPageNumber() {\n  btn3Ref.textContent = Number(currentPage) + 1;\n  btn4Ref.textContent = Number(currentPage) + 2;\n\n  if (currentPage >= 3 && currentPage <= 997) {\n    butMinus.hidden = false;\n    btn1Ref.hidden = false;\n    btn2Ref.hidden = false;\n    btn5Ref.hidden = false;\n\n    btn2Ref.textContent = currentPage - 1;\n    btn1Ref.textContent = currentPage - 2;\n\n    btn3Ref.hidden = false;\n    btn4Ref.hidden = false;\n    butPlus.hidden = false;\n    btn6Ref.hidden = false;\n  }\n  if (currentPage < 3) {\n    btn1Ref.hidden = true;\n    btn2Ref.hidden = true;\n    btn5Ref.hidden = true;\n  }\n\n  if (currentPage >= 998 && currentPage <= 1000) {\n    btn1Ref.hidden = false;\n    btn2Ref.hidden = false;\n    btn2Ref.textContent = currentPage - 1;\n    btn1Ref.textContent = currentPage - 2;\n  }\n  if (currentPage >= 998) {\n    // btn3Ref.hidden = true;\n    btn4Ref.hidden = true;\n  }\n  if (currentPage >= 1000) {\n    btn3Ref.hidden = true;\n    btn6Ref.hidden = true;\n    butPlus.hidden = true;\n  }\n}\n\nexport { currentPage };\n","import { onButtonClickPlus } from './pagination';\nimport { createMarkup } from '../header-search';\nimport { containerGallery } from '../utils/refs';\nimport { currentPage } from './pagination';\nimport ApiService from '../ApiService';\n\nconst api = new ApiService();","import {\n  containerGallery,\n  searchFormRef,\n  notifyARef,\n  notifyBRef,\n} from './utils/refs';\nimport { urls } from './utils/config';\nimport ApiService from './ApiService';\nimport { getGenresName } from './utils/get-genres-name';\nimport { sliceGenres } from './utils/slice-genres';\nimport { addBackToTop } from 'vanilla-back-to-top';\nimport { callback, options, io } from './pagination/io';\n\nconst api = new ApiService();\nlet queryPage = 1;\nsearchFormRef.addEventListener('submit', onSubmit);\n\nexport async function onSubmit(event, page) {\n  event.preventDefault();\n  const searchQuery = event.currentTarget.elements.searchQuery.value\n    .trim()\n    .toLowerCase();\n  if (!searchQuery) {\n    notifyARef.classList.add('visually-hidden');\n    notifyBRef.classList.remove('visually-hidden');\n    setTimeout(() => {\n      location.reload();\n    }, 1000);\n    return;\n  }\n  api.query = searchQuery;\n  // paginContainer.hidden = true;\n  const options = {\n    root: null,\n    rootMargin: '100px',\n    threshold: 1.0,\n  };\n\n  const io = new IntersectionObserver(async (entries, io) => {\n    entries.forEach(async entry => {\n      if (entry.isIntersecting) {\n        incrementPage();\n        const data = await api.getMoviesByName(searchQuery, queryPage);\n        const markup = createMarkup(data);\n        containerGallery.insertAdjacentHTML('beforeend', markup);\n      }\n    });\n  }, options);\n\n  const target = document.querySelector('.pagination-container');\n  io.observe(target);\n  target.style.opacity = '0';\n  target.style.pointerEvents = 'none';\n\n  const data = await api.getMoviesByName(searchQuery, page);\n  localStorage.setItem('query', JSON.stringify(data));\n\n  if (data.total_results === 0) {\n    notifyBRef.classList.add('visually-hidden');\n    notifyARef.classList.remove('visually-hidden');\n    setTimeout(() => {\n      location.reload();\n    }, 1000);\n  } else {\n    notifyARef.classList.add('visually-hidden');\n    notifyBRef.classList.add('visually-hidden');\n    clearMarkup();\n    const markup = createMarkup(data);\n    containerGallery.insertAdjacentHTML('beforeend', markup);\n  }\n}\n\nexport function createMarkup(data) {\n  const { results } = data;\n  return results\n    .map(({ poster_path, original_title, genre_ids, release_date, id }) => {\n      const releaseYear = new Date(release_date);\n      const genres = getGenresName(genre_ids);\n      const slicedGenres = sliceGenres(genres);\n      let posterLink = `${urls.BASE_IMAGE_URL}${poster_path}`;\n      if (poster_path === null) {\n        posterLink = 'https://i.postimg.cc/zG4yJ7P4/No-Image-Available.jpg';\n      }\n      return `<li class=\"card__item\" data-id=${id}>\n  <div class=\"card__img-wrap js-modal-trigger\">\n    <img\n      src=\"${posterLink}\"\n      alt=\"${original_title}\"\n      class=\"card__img\"\n    />\n  </div>\n  <div class=\"card__text-wrap js-modal-trigger\">\n    <h2 class=\"card__name\">${original_title}</h2>\n    <div class=\"card__info\">\n      <p class=\"card__genres\">${slicedGenres.join(', ')}</p>\n      <p class=\"card__year\">${releaseYear.getFullYear()}</p>\n    </div>\n  </div>\n</li>`;\n    })\n    .join('');\n}\n\nexport function clearMarkup() {\n  containerGallery.innerHTML = '';\n}\n\naddBackToTop({\n  diameter: 45,\n  backgroundColor: 'transparent',\n  textColor: '#e5882c',\n});\n\nfunction incrementPage() {\n  return (queryPage += 1);\n}\n","import ApiService from './ApiService';\nimport { containerGallery } from './utils/refs';\nimport { createMarkup } from './utils/createMarkup';\nimport { currentPage } from './pagination/pagination';\n\nconst apiMovie = new ApiService();\n\nexport async function homePage() {\n  const res = await apiMovie.fetchTrendingMovies();\n  const movieObj = res.data.results;\n  localStorage.setItem('trendingFilms', JSON.stringify(movieObj));\n\n  const markup = createMarkup(movieObj);\n  containerGallery.insertAdjacentHTML('beforeend', markup);\n}\n\ndocument.addEventListener('DOMContentLoaded', homePage);\n","import ApiService from '../ApiService';\nimport { localStore } from '../utils/loc-storage';\n\nconst api = new ApiService();\n","import ApiService from '../ApiService';\nimport { containerGallery, notifyARef, notifyBRef } from '../utils/refs';\nimport { clearMarkup } from '../header-search';\nimport { createMarkup } from '../utils/createMarkup';\n\nconst api = new ApiService();\n\nexport async function searchMovies(query, page = 1) {\n  try {\n    const data = await api.getMoviesByName(query, page);\n    const result = data.results;\n    if (data.results.length === 0) {\n      notifyBRef.classList.add('visually-hidden');\n      notifyARef.classList.remove('visually-hidden');\n    } else {\n      notifyARef.classList.add('visually-hidden');\n      notifyBRef.classList.add('visually-hidden');\n      const markup = createMarkup(result);\n      clearMarkup();\n      containerGallery.innerHTML = markup;\n    }\n  } catch (error) {\n    console.error('Error with search fetch' + error);\n  }\n}\n"],"names":["document","querySelector","$0231f23712a163b4$export$66921f676455c525","$0231f23712a163b4$export$18967640b1430a3","$0231f23712a163b4$export$10392726a695ce22","$0231f23712a163b4$export$161bf839e562c1df","$0231f23712a163b4$export$8759e09ada778193","querySelectorAll","$4kseb","parcelRequire","$6077aa4079e9cd36$var$api","default","$6077aa4079e9cd36$var$butPlus","$6077aa4079e9cd36$var$butMinus","addEventListener","async","$6077aa4079e9cd36$export$385972cd6b54c3e1","$6077aa4079e9cd36$var$renderPage","$6077aa4079e9cd36$var$checkPageNumber","console","log","$6077aa4079e9cd36$var$btn1Ref","$6077aa4079e9cd36$var$btn2Ref","$6077aa4079e9cd36$var$btn3Ref","$6077aa4079e9cd36$var$btn4Ref","$6077aa4079e9cd36$var$btn5Ref","$6077aa4079e9cd36$var$btn6Ref","Number","textContent","hidden","value","data","getMoviesByName","results","markup","$dX4f0","createMarkup","$edfa7bf7998b65bb$export$d1927cf3bc385580","innerHTML","fetchTrendingMovies","window","scrollTo","top","behavior","getElementById","error","$edfa7bf7998b65bb$var$api","$edfa7bf7998b65bb$var$queryPage","$edfa7bf7998b65bb$export$24783e9f3a24abe4","map","poster_path","original_title","genre_ids","release_date","id","releaseYear","Date","genres","$aICLh","getGenresName","slicedGenres","$8JeJA","sliceGenres","posterLink","$hXrWV","urls","BASE_IMAGE_URL","join","getFullYear","event","page","preventDefault","searchQuery","currentTarget","elements","trim","toLowerCase","classList","add","remove","setTimeout","location","reload","query","io1","IntersectionObserver","entries","io","forEach","entry","isIntersecting","insertAdjacentHTML","root","rootMargin","threshold","target","observe","style","opacity","pointerEvents","data1","localStorage","setItem","JSON","stringify","total_results","$4eRSF","addBackToTop","diameter","backgroundColor","textColor","$aab6d1c60b3e9a0a$var$apiMovie","movieObj"],"version":3,"file":"index.08295b7b.js.map"}