{"mappings":"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","sources":["src/index.js","src/js/modal-card-film/modal.js","src/js/pagination.js"],"sourcesContent":["import './js/utils/handlebars-helpers';\n\nimport './js/footer_modal';\n// import { localStorageFilms } from \nimport './js/modal-card-film/modal';\nimport './js/utils/set-genres-to-localstorage';\nimport './js/pagination'\n","const refs = {\n  body: document.body,\n  openBtn: document.querySelector('button[data-modal-open]'),\n  closeBtn: document.querySelector('button[data-modal-close]'),\n  backdrop: document.querySelector('div[data-modal]'),\n};\n\nrefs.openBtn.addEventListener('click', onOpenBtnClick);\nfunction onOpenBtnClick() {\n  refs.backdrop.classList.remove('is-hidden');\n}\n\nrefs.closeBtn.addEventListener('click', onCloseBtnClick);\nfunction onCloseBtnClick() {\n  refs.backdrop.classList.add('is-hidden');\n}\n","const pageNumbers = (total, max, current) => {\n  const half = Math.floor(max / 2);\n  let to = max;\n  \n  if(current + half >= total) {\n    to = total;\n  } else if(current > half) {\n    to = current + half ;\n  }\n  \n  let from = Math.max(to - max, 0);\n\n  return Array.from({length: Math.min(total, max)}, (_, i) => (i + 1) + from);\n}\n\nfunction PaginationButton(totalPages, maxPagesVisible = 10, currentPage = 1) {\n  let pages = pageNumbers(totalPages, maxPagesVisible, currentPage);\n  let currentPageBtn = null;\n  const buttons = new Map();\n  const disabled = {\n    start: () => currentPage === 1 || currentPage > totalPages,\n    prev: () => pages[0] === 1,\n    end: () => currentPage >= totalPages,\n    next: () => pages.slice(-1)[0] === totalPages\n  }\n  const frag = document.createDocumentFragment();\n  const paginationButtonContainer = document.createElement('div');\n  paginationButtonContainer.className = 'pagination-buttons';\n  \n  const createAndSetupButton = (label = '', cls = '', disabled = false, handleClick) => {\n    const buttonElement = document.createElement('button');\n    buttonElement.textContent = label;\n    buttonElement.className = `page-btn ${cls}`;\n    buttonElement.disabled = disabled;\n    buttonElement.addEventListener('click', e => {\n      handleClick(e);\n      this.update();\n      paginationButtonContainer.value = currentPage;\n      paginationButtonContainer.dispatchEvent(new CustomEvent('change', {detail: {currentPageBtn}}));\n    });\n    \n    return buttonElement;\n  }\n  \n  const onPageButtonClick = e => currentPage = Number(e.currentTarget.textContent);\n  \n  const onPageButtonUpdate = index => (btn) => {\n    btn.textContent = pages[index];\n    \n    if(pages[index] === currentPage) {\n      currentPageBtn.classList.remove('active');\n      btn.classList.add('active');\n      currentPageBtn = btn;\n      currentPageBtn.focus();\n    }\n  };\n  \n  buttons.set(\n    createAndSetupButton('', 'start-page', disabled.start(), () => currentPage = 1),\n    (btn) => btn.disabled = disabled.start()\n  )\n  \n  buttons.set(\n    createAndSetupButton('', 'prev-page', disabled.prev(), () => currentPage -= 1),\n    (btn) => btn.disabled = disabled.prev()\n  \n  )\n  \n  pages.map((pageNumber, index) => {\n    const isCurrentPage = currentPage === pageNumber;\n    const button = createAndSetupButton(\n      pageNumber, isCurrentPage ? 'active' : '', false, onPageButtonClick\n    );\n    \n    if(isCurrentPage) {\n      currentPageBtn = button;\n    }\n    \n    buttons.set(button, onPageButtonUpdate(index));\n  });\n  \n  buttons.set(\n    createAndSetupButton('', 'next-page', disabled.next(), () => currentPage += 1),\n    (btn) => btn.disabled = disabled.next()\n  )\n  \n  buttons.set(\n    createAndSetupButton('', 'end-page', disabled.end(), () => currentPage = totalPages),\n    (btn) => btn.disabled = disabled.end()\n  )\n  \n  buttons.forEach((_, btn) => frag.appendChild(btn));\n  paginationButtonContainer.appendChild(frag);\n  \n  this.render = (container = document.body) => {\n    container.appendChild(paginationButtonContainer);\n  }\n  \n  this.update = (newPageNumber = currentPage) => {\n    currentPage = newPageNumber;\n    pages = pageNumbers(totalPages, maxPagesVisible, currentPage);\n    buttons.forEach((updateButton, btn) => updateButton(btn));\n  }\n  \n  this.onChange = (handler) => {\n    paginationButtonContainer.addEventListener('change', handler);\n  }\n}\n\nconst paginationButtons = new PaginationButton(10, 5);\n\npaginationButtons.render();\n\npaginationButtons.onChange(e => {\n  console.log('-- changed', e.target.value)\n});\n"],"names":["parcelRequire","$d3aca5e51d52bdd9$var$refs","body","document","openBtn","querySelector","closeBtn","backdrop","addEventListener","classList","remove","add","$dfaf77c789ce7a24$var$pageNumbers","total","max","current","half","Math","floor","to","from","Array","length","min","_","i","$dfaf77c789ce7a24$var$paginationButtons","totalPages","maxPagesVisible","arguments","currentPage","pages","currentPageBtn","buttons","Map","disabled1","start","prev","end","next","slice","frag","createDocumentFragment","paginationButtonContainer","createElement","className","createAndSetupButton","label","cls","disabled","handleClick","buttonElement","textContent","concat","e","_this1","update","value","dispatchEvent","CustomEvent","detail","onPageButtonClick","Number","currentTarget","onPageButtonUpdate","index","btn","focus","set","map","pageNumber","isCurrentPage","button","forEach","appendChild","this","render","container","newPageNumber","updateButton","onChange","handler","console","log","target"],"version":3,"file":"index.c97d4a21.js.map"}