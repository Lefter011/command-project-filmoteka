!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequire62cb;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},t.parcelRequire62cb=r),r.register("1UHsN",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}})),r.register("ffZzF",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}})),r.register("5k7tO",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),r("2p6Fd");var s=r("bpxeT"),o=r("2TvXO"),c=(document.querySelector(".button--up"),document.querySelector(".js-gallery")),i=(document.querySelector(".pag"),document.querySelector(".search-form")),d=(document.querySelector(".js-movie-card"),document.querySelector("#accordion"),document.querySelector(".js-spinner"),document.querySelector("#header"),document.querySelector(".alert-a")),u=document.querySelector(".alert-b"),l=(document.querySelector(".header-buttons"),document.querySelectorAll(".header-button"),r("iqi4A")),v=(s=r("bpxeT"),r("8MBJY")),p={};Object.defineProperty(p,"__esModule",{value:!0}),p.default=function(e,t){var n=m.default(e,t,"get");return _.default(e,n)};var m=f(r("1UHsN")),_=f(r("ffZzF"));function f(e){return e&&e.__esModule?e:{default:e}}var h={};Object.defineProperty(h,"__esModule",{value:!0}),h.default=function(e,t,n){g.default(e,t),t.set(e,n)};var y,g=(y=r("5k7tO"))&&y.__esModule?y:{default:y};var b=r("a2hTj"),w=(o=r("2TvXO"),l=r("iqi4A"),r("dIxxU").default),k=new WeakMap,x=new WeakMap,L=new WeakMap,S=function(){"use strict";function t(){e(v)(this,t),e(h)(this,k,{writable:!0,value:{params:{api_key:l.API_KEY,query:"",page:1,include_adult:!1}}}),e(h)(this,x,{writable:!0,value:{params:{api_key:l.API_KEY}}}),e(h)(this,L,{writable:!0,value:{params:{api_key:l.API_KEY}}})}return e(b)(t,[{key:"fetchGenres",value:function(){var t=this;return e(s)(e(o).mark((function n(){var a,r,s;return e(o).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=l.urls.BASE_URL+l.urls.GENRES_PATH_URL,n.prev=1,n.next=4,w.get(a,e(p)(t,x));case 4:return r=n.sent,s=r.data.genres,n.abrupt("return",s);case 9:n.prev=9,n.t0=n.catch(1),console.error(n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()}},{key:"fetchTrendingMovies",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(s)(e(o).mark((function n(){var a,r,s;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.urls.BASE_URL+l.urls.TRENDINGS_PATH_URL,r={params:{api_key:l.API_KEY,page:t}},e.prev=1,e.next=4,w.get(a,r);case 4:return s=e.sent,e.abrupt("return",s);case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),n,null,[[1,8]])})))()}},{key:"fetchMoviesByName",value:function(){var t=this;return e(s)(e(o).mark((function n(){var a,r;return e(o).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=l.urls.BASE_URL+l.urls.SEARCH_PATH_URL,n.prev=1,n.next=4,w.get(a,e(p)(t,k));case 4:return r=n.sent,n.abrupt("return",r);case 8:n.prev=8,n.t0=n.catch(1),console.error(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()}},{key:"getMoviesByName",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this;return e(s)(e(o).mark((function r(){var s,c;return e(o).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e(p)(a,k).params.query=t,e(p)(a,k).params.page=n,s=l.urls.BASE_URL+l.urls.SEARCH_PATH_URL,r.next=5,w.get(s,e(p)(a,k));case 5:return c=r.sent,r.abrupt("return",c.data);case 7:case"end":return r.stop()}}),r)})))()}},{key:"fetchMoviesByID",value:function(t){var n=this;return e(s)(e(o).mark((function a(){var r,s;return e(o).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=l.urls.BASE_URL+l.urls.GET_MOVIE_DETAILS_PATH_URL+t,a.prev=1,a.next=4,w.get(r,e(p)(n,L));case 4:return s=a.sent,a.abrupt("return",s.data);case 8:a.prev=8,a.t0=a.catch(1),console.error(a.t0);case 11:case"end":return a.stop()}}),a,null,[[1,8]])})))()}},{key:"catch",value:function(e){console.error(e)}}]),t}();function E(e,t){for(var n=JSON.parse('{"genres":[{"id":28,"name":"Action"},{"id":12,"name":"Adventure"},{"id":16,"name":"Animation"},{"id":35,"name":"Comedy"},{"id":80,"name":"Crime"},{"id":99,"name":"Documentary"},{"id":18,"name":"Drama"},{"id":10751,"name":"Family"},{"id":14,"name":"Fantasy"},{"id":36,"name":"History"},{"id":27,"name":"Horror"},{"id":10402,"name":"Music"},{"id":9648,"name":"Mystery"},{"id":10749,"name":"Romance"},{"id":878,"name":"Science Fiction"},{"id":10770,"name":"TV Movie"},{"id":53,"name":"Thriller"},{"id":10752,"name":"War"},{"id":37,"name":"Western"}]}').genres,a=[],r=0;r<t&&r<e.length;r+=1){var s=!0,o=!1,c=void 0;try{for(var i,d=n[Symbol.iterator]();!(s=(i=d.next()).done);s=!0)genre=i.value,e[r]===genre.id&&a.push(genre.name)}catch(e){o=!0,c=e}finally{try{s||null==d.return||d.return()}finally{if(o)throw c}}}return e.length>t&&a.splice(t-1,1,"Other"),a.join(" ")}var q=new S;function A(){return(A=e(s)(e(o).mark((function t(n){var a,r,s;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a=n.currentTarget.elements.searchQuery.value.trim().toLowerCase()){e.next=6;break}return d.classList.add("visually-hidden"),u.classList.remove("visually-hidden"),e.abrupt("return");case 6:return e.next=8,q.getMoviesByName(a);case 8:0===(r=e.sent).total_results?(u.classList.add("visually-hidden"),d.classList.remove("visually-hidden")):(d.classList.add("visually-hidden"),u.classList.add("visually-hidden"),M(),s=T(r),c.insertAdjacentHTML("beforeend",s));case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function T(e){return e.results.map((function(e){var t=e.poster_path,n=e.original_title,a=e.genre_ids,r=e.release_date,s=e.id,o=r.substring(0,4),c=E(a,3),i="".concat(l.urls.BASE_IMAGE_URL).concat(t);return null===t&&(i="https://i.postimg.cc/zG4yJ7P4/No-Image-Available.jpg"),'<li class="card__item">\n  <div class="card__img-wrap">\n    <img\n      src="'.concat(i,'"\n      alt="').concat(n,'"\n      class="card__img"\n    />\n  </div>\n  <div class="card__text-wrap">\n    <h2 class="card__name">').concat(n,'</h2>\n    <div class="card__info">\n      <p class="visually-hidden">').concat(s,'</p>\n      <p class="card__genres">').concat(c,'</p>\n      <p class="card__year">').concat(o,"</p>\n    </div>\n  </div>\n</li>")})).join("")}function M(){c.innerHTML=""}i.addEventListener("submit",(function(e){return A.apply(this,arguments)}));s=r("bpxeT"),o=r("2TvXO"),l=r("iqi4A");function B(e){return e.map((function(e){e.genre_ids;var t=e.title,n=e.poster_path;e.release_date;return'<li class="card__item">\n  <div class="card__img-wrap">\n    <img\n      src="'.concat(l.urls.BASE_IMAGE_URL).concat(n,'"\n      alt="').concat(t,'"\n      class="card__img"\n    />\n  </div>\n  <div class="card__text-wrap">\n    <h2 class="card__name">').concat(t,'</h2>\n    <div class="card__info">\n      <p class="card__genres">Drama, Action<span class="card__year"></span></p>\n      <p class="card__year">2022</p>\n    </div>\n  </div>\n</li>')})).join("")}var O=new S;function j(){return(j=e(s)(e(o).mark((function t(){var n,a,r;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.fetchTrendingMovies();case 2:n=e.sent,a=n.data.results,localStorage.setItem("trendingFilms",JSON.stringify(a)),r=B(a),c.insertAdjacentHTML("beforeend",r);case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}document.addEventListener("DOMContentLoaded",(function(){return j.apply(this,arguments)})),r("ewLqX");v=r("8MBJY"),b=r("a2hTj");var I=new(function(){"use strict";function t(){e(v)(this,t)}return e(b)(t,[{key:"load",value:function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}}},{key:"save",value:function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error("Set state error: ",e.message)}}},{key:"remove",value:function(e){try{localStorage.removeItem(e)}catch(e){console.error("Get state error: ",e.message)}}}]),t}()),R={body:document.body,openBtn:document.querySelector("button[data-modal-open]"),closeBtn:document.querySelector("button[data-modal-close]"),backdrop:document.querySelector("div[data-modal]")};R.openBtn.addEventListener("click",(function(){R.backdrop.classList.remove("is-hidden")})),R.closeBtn.addEventListener("click",(function(){R.backdrop.classList.add("is-hidden")}));var N={body:document.body,openBtn:document.querySelector("button[data-modal-open]"),closeBtn:document.querySelector("button[data-modal-close]"),backdrop:document.querySelector("div[data-modal]"),modal:document.querySelector("div.js-movie-card"),containerForInfo:document.querySelector("div.modal__container")},P="https://image.tmdb.org/t/p/",U="original",H="w342",D="w780",F=null;!function(e){e.id;var t,n=e.title,a=e.original_title,r=e.overview,s=e.poster_path,o=(e.genre_ids,e.popularity),c=e.vote_average,i=e.vote_count;F='<div class="modal__content">\n  <div class="img-thumb">\n    <picture class="main-modal-img">\n      <source\n        srcset="'.concat(P).concat(U).concat(s,'"\n        media="(min-width: 1024px)"\n      />\n      <source\n        srcset="\n          ').concat(P).concat(D).concat(s,"  1x,\n          ").concat(P).concat(U).concat(s,' 2x\n        "\n        media="(min-width: 768px)"\n      />\n      <source\n        srcset="\n          ').concat(P).concat(H).concat(s," 1x,\n          ").concat(P).concat(D).concat(s,' 2x\n        "\n        media="(min-width: 320px)"\n      />\n\n      <img\n        src="').concat(P).concat(H).concat(s,'"\n        alt="').concat(n,'"\n        class="main-modal-img"\n      />\n    </picture>\n  </div>\n  <div class="modal__info-container">\n    <h2 class="modal__title">').concat(n,'</h2>\n    <table class="modal__stats">\n      <tr class="stats__row">\n        <td class="stats__name">Vote</td>\n        <td class="stats__value">\n          <span class="accent-num">').concat(c,'</span> /\n          <span class="grey-num">').concat(i,'</span>\n        </td>\n      </tr>\n      <tr class="stats__row">\n        <td class="stats__name">Popularity</td>\n        <td class="stats__value">').concat(o,'</td>\n      </tr>\n      <tr class="stats__row">\n        <td class="stats__name">Original Title</td>\n        <td class="stats__value">').concat(a,'</td>\n      </tr>\n      <tr class="stats__row">\n        <td class="stats__name">Genre</td>\n        <td class="stats__value">????</td>\n      </tr>\n    </table>\n\n    <section class="modal__about">\n      <h3 class="about__title">About</h3>\n      <p class="about__text">').concat(r,'</p>\n    </section>\n    <div class="modal__buttons">\n      <button\n        type="button"\n        class="modal__btn modal__btn--orange"\n        data-modal-watched\n      >\n        add to watched\n      </button>\n      <button\n        type="button"\n        class="modal__btn modal__btn--light"\n        data-modal-queue\n      >\n        add to queue\n      </button>\n    </div>\n  </div>\n</div>'),t=F,N.containerForInfo.innerHTML=t}({adult:!1,backdrop_path:"/bUjPcNS8GweBh5Nxp8oq9Dy712Z.jpg",id:913290,title:"Barbarian",original_language:"en",original_title:"Barbarian",overview:"In town for a job interview, a young woman arrives at her Airbnb late at night only to find that it has been mistakenly double-booked and a strange man is already staying there. Against her better judgement, she decides to stay the night anyway, but soon discovers that there is much more to be afraid of in the house than the other guest.",poster_path:"/idT5mnqPcJgSkvpDX7pJffBzdVH.jpg",media_type:"movie",genre_ids:[27,9648,53],popularity:376.929,release_date:"2022-09-08",video:!1,vote_average:7.191,vote_count:207});var G="watched";function J(e){var t=I.load(G),n=t.find((function(t){return t.id===e.id}));if(n){var a=t.indexOf(n);t.splice(a,1),I.save(G,t)}else t.push(e),I.save(G,t)}var C="queue";function X(e){var t=I.load(C),n=t.find((function(t){return t.id===e.id}));if(n){var a=t.indexOf(n);t.splice(a,1),I.save(C,t)}else t.push(e),I.save(C,t)}function Y(){N.backdrop.classList.add("is-hidden"),N.modal.classList.remove("is-open"),N.body.classList.remove("modal-shown"),N.body.removeEventListener("click",z),window.removeEventListener("keydown",W)}function z(e){"backdrop"===e.target.className&&Y()}function W(e){"Escape"===e.code&&Y()}N.openBtn.addEventListener("click",(function(e){N.backdrop.classList.remove("is-hidden"),N.modal.classList.add("is-open"),N.body.classList.add("modal-shown"),N.body.addEventListener("click",z),window.addEventListener("keydown",W),t=document.querySelector("button[data-modal-queue]"),n=document.querySelector("button[data-modal-watched]"),t.addEventListener("click",X),n.addEventListener("click",J),function(){var e=I.load(G);e=e||[],I.save(G,e);var t=I.load(C);t=t||[],I.save(C,t)}();var t,n})),N.closeBtn.addEventListener("click",Y);s=r("bpxeT"),o=r("2TvXO");var K=new S;function V(){return(V=e(s)(e(o).mark((function t(){var n;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.fetchTrendingMovies();case 2:n=e.sent,I.save("trendingFilms",n.data.results);case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}!function(){V.apply(this,arguments)}()}();
//# sourceMappingURL=index.0caa469c.js.map
