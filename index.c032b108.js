function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},s=t.parcelRequire62cb;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var s={id:e,exports:{}};return n[e]=s,t.call(s.exports,s,s.exports),s.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequire62cb=s),s.register("fExtF",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}})),s.register("iaRLo",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}})),s.register("7K24o",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),s("98X4p");document.querySelector(".button--up");const o=document.querySelector(".js-gallery"),r=(document.querySelector(".pag"),document.querySelector(".search-form"));document.querySelector(".js-movie-card"),document.querySelector("#accordion"),document.querySelector(".js-spinner"),document.querySelector("#header"),document.querySelector(".header-buttons"),document.querySelectorAll(".header-button");var i={};Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){var n=c.default(e,t,"get");return l.default(e,n)};var c=d(s("fExtF")),l=d(s("iaRLo"));function d(e){return e&&e.__esModule?e:{default:e}}var u={};Object.defineProperty(u,"__esModule",{value:!0}),u.default=function(e,t,n){m.default(e,t),t.set(e,n)};var _,m=(_=s("7K24o"))&&_.__esModule?_:{default:_};var p=s("hXrWV"),v=s("2shzp").default,g=new WeakMap,h=new WeakMap,y=new WeakMap;class f{async fetchGenres(){const t=p.urls.BASE_URL+p.urls.GENRES_PATH_URL;try{const n=await v.get(t,e(i)(this,h));return n.data.genres}catch(e){console.error(e)}}async fetchTrendingMovies(e=1){const t=p.urls.BASE_URL+p.urls.TRENDINGS_PATH_URL,n={params:{api_key:p.API_KEY,page:e}};try{return await v.get(t,n)}catch(e){console.error(e)}}async fetchMoviesByName(){const t=p.urls.BASE_URL+p.urls.SEARCH_PATH_URL;try{return await v.get(t,e(i)(this,g))}catch(e){console.error(e)}}async getMoviesByName(t,n=1){e(i)(this,g).params.query=t,e(i)(this,g).params.page=n;const a=p.urls.BASE_URL+p.urls.SEARCH_PATH_URL;return(await v.get(a,e(i)(this,g))).data}async fetchMoviesByID(t){const n=p.urls.BASE_URL+p.urls.GET_MOVIE_DETAILS_PATH_URL+t;try{return(await v.get(n,e(i)(this,y))).data}catch(e){console.error(e)}}catch(e){console.error(e)}constructor(){e(u)(this,g,{writable:!0,value:{params:{api_key:p.API_KEY,query:"",page:1,include_adult:!1}}}),e(u)(this,h,{writable:!0,value:{params:{api_key:p.API_KEY}}}),e(u)(this,y,{writable:!0,value:{params:{api_key:p.API_KEY}}})}}const b=new f;r.addEventListener("submit",(async function(e){e.preventDefault();const t=e.currentTarget.elements.searchQuery.value.trim().toLowerCase();if(!t)return void alert("Enter a search query!");const n=await b.getMoviesByName(t);0===n.total_results&&alert("Search result is unsuccessful. Enter the correct movie name and try again!");o.innerHTML="";const a=function(e){const{results:t}=e;return t.map((({poster_path:e,original_title:t,genre_ids:n,release_date:a})=>{let s=`${"https://image.tmdb.org/t/p/original"}${e}`;return null===e&&(s="https://i.postimg.cc/zG4yJ7P4/No-Image-Available.jpg"),`<li class="hero__movie-item">\n<div class="gallery__section">\n    <ul class="gallery__card">\n        <li class="gallery-list list">\n            <div class="gallary__titular">\n                <img src="${s}" alt="${t}" class="gallery__img">\n        </li>\n        </div>\n        <div class="gallary__info">\n            <p class="card__name">${t}</p>\n            <p class="card__info">${n} , ${a.substring(0,4)}</p>\n        </div>\n    </ul>\n</div>\n</li>`})).join("")}(n);o.insertAdjacentHTML("beforeend",a)}));p=s("hXrWV");const w=new f;document.addEventListener("DOMContentLoaded",(async function(){const e=(await w.fetchTrendingMovies()).data.results;localStorage.setItem("trendingFilms",JSON.stringify(e));const t=e.map((({genre_ids:e,title:t,poster_path:n,release_date:a})=>`<li class="card__item">\n  <div class="card__img-wrap">\n    <img\n      src="${p.urls.BASE_IMAGE_URL}${n}"\n      alt="${t}"\n      class="card__img"\n    />\n  </div>\n  <div class="card__text-wrap">\n    <h2 class="card__name">${t}</h2>\n    <div class="card__info">\n      <p class="card__genres">Drama, Action<span class="card__year"></span></p>\n      <p class="card__year">2022</p>\n    </div>\n  </div>\n</li>`)).join("");o.insertAdjacentHTML("beforeend",t)})),s("HzXMd");const S=new class{load(e){try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}}save(e,t){try{const n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error("Set state error: ",e.message)}}remove(e){try{localStorage.removeItem(e)}catch(e){console.error("Get state error: ",e.message)}}},L={body:document.body,openBtn:document.querySelector("button[data-modal-open]"),closeBtn:document.querySelector("button[data-modal-close]"),backdrop:document.querySelector("div[data-modal]")};L.openBtn.addEventListener("click",(function(){L.backdrop.classList.remove("is-hidden")})),L.closeBtn.addEventListener("click",(function(){L.backdrop.classList.add("is-hidden")}));const E={body:document.body,openBtn:document.querySelector("button[data-modal-open]"),closeBtn:document.querySelector("button[data-modal-close]"),backdrop:document.querySelector("div[data-modal]"),modal:document.querySelector("div.js-movie-card"),containerForInfo:document.querySelector("div.modal__container")};let q=null;!function(e){const{id:t,title:n,original_title:a,overview:s,poster_path:o,genre_ids:r,popularity:i,vote_average:c,vote_count:l}=e;var d;q=`<div class="modal__content">\n  <div class="img-thumb">\n    <picture class="main-modal-img">\n      <source\n        srcset="https://image.tmdb.org/t/p/original${o}"\n        media="(min-width: 1024px)"\n      />\n      <source\n        srcset="\n          https://image.tmdb.org/t/p/w780${o}  1x,\n          https://image.tmdb.org/t/p/original${o} 2x\n        "\n        media="(min-width: 768px)"\n      />\n      <source\n        srcset="\n          https://image.tmdb.org/t/p/w342${o} 1x,\n          https://image.tmdb.org/t/p/w780${o} 2x\n        "\n        media="(min-width: 320px)"\n      />\n\n      <img\n        src="https://image.tmdb.org/t/p/w342${o}"\n        alt="${n}"\n        class="main-modal-img"\n      />\n    </picture>\n  </div>\n  <div class="modal__info-container">\n    <h2 class="modal__title">${n}</h2>\n    <table class="modal__stats">\n      <tr class="stats__row">\n        <td class="stats__name">Vote</td>\n        <td class="stats__value">\n          <span class="accent-num">${c}</span> /\n          <span class="grey-num">${l}</span>\n        </td>\n      </tr>\n      <tr class="stats__row">\n        <td class="stats__name">Popularity</td>\n        <td class="stats__value">${i}</td>\n      </tr>\n      <tr class="stats__row">\n        <td class="stats__name">Original Title</td>\n        <td class="stats__value">${a}</td>\n      </tr>\n      <tr class="stats__row">\n        <td class="stats__name">Genre</td>\n        <td class="stats__value">????</td>\n      </tr>\n    </table>\n\n    <section class="modal__about">\n      <h3 class="about__title">About</h3>\n      <p class="about__text">${s}</p>\n    </section>\n    <div class="modal__buttons">\n      <button\n        type="button"\n        class="modal__btn modal__btn--orange"\n        data-modal-watched\n      >\n        add to watched\n      </button>\n      <button\n        type="button"\n        class="modal__btn modal__btn--light"\n        data-modal-queue\n      >\n        add to queue\n      </button>\n    </div>\n  </div>\n</div>`,d=q,E.containerForInfo.innerHTML=d}({adult:!1,backdrop_path:"/bUjPcNS8GweBh5Nxp8oq9Dy712Z.jpg",id:913290,title:"Barbarian",original_language:"en",original_title:"Barbarian",overview:"In town for a job interview, a young woman arrives at her Airbnb late at night only to find that it has been mistakenly double-booked and a strange man is already staying there. Against her better judgement, she decides to stay the night anyway, but soon discovers that there is much more to be afraid of in the house than the other guest.",poster_path:"/idT5mnqPcJgSkvpDX7pJffBzdVH.jpg",media_type:"movie",genre_ids:[27,9648,53],popularity:376.929,release_date:"2022-09-08",video:!1,vote_average:7.191,vote_count:207});function k(e){const t=S.load("watched"),n=t.find((t=>t.id===e.id));if(n){const e=t.indexOf(n);t.splice(e,1),S.save("watched",t)}else t.push(e),S.save("watched",t)}function A(e){const t=S.load("queue"),n=t.find((t=>t.id===e.id));if(n){const e=t.indexOf(n);t.splice(e,1),S.save("queue",t)}else t.push(e),S.save("queue",t)}function M(){E.backdrop.classList.add("is-hidden"),E.modal.classList.remove("is-open"),E.body.classList.remove("modal-shown"),E.body.removeEventListener("click",x),window.removeEventListener("keydown",$)}function x(e){"backdrop"===e.target.className&&M()}function $(e){"Escape"===e.code&&M()}E.openBtn.addEventListener("click",(function(e){E.backdrop.classList.remove("is-hidden"),E.modal.classList.add("is-open"),E.body.classList.add("modal-shown"),E.body.addEventListener("click",x),window.addEventListener("keydown",$),function(){const e=document.querySelector("button[data-modal-queue]"),t=document.querySelector("button[data-modal-watched]");e.addEventListener("click",A),t.addEventListener("click",k)}(),function(){let e=S.load("watched");e=e||[],S.save("watched",e);let t=S.load("queue");t=t||[],S.save("queue",t)}()})),E.closeBtn.addEventListener("click",M);const T=new f;!async function(){const e=await T.fetchTrendingMovies();S.save("trendingFilms",e.data.results)}();
//# sourceMappingURL=index.c032b108.js.map
