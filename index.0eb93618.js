!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequire62cb;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequire62cb=r),r.register("1UHsN",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}})),r.register("ffZzF",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}})),r.register("5k7tO",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),r("2p6Fd");var o=r("bpxeT"),s=r("2TvXO"),c=(document.querySelector(".button--up"),document.querySelector(".js-gallery")),i=(document.querySelector(".pag"),document.querySelector(".search-form")),l=(document.querySelector(".js-movie-card"),document.querySelector("#accordion"),document.querySelector(".js-spinner"),document.querySelector("#header"),document.querySelector(".notify")),u=(document.querySelector(".header-buttons"),document.querySelectorAll(".header-button"),o=r("bpxeT"),r("8MBJY")),d={};Object.defineProperty(d,"__esModule",{value:!0}),d.default=function(e,t){var n=p.default(e,t,"get");return v.default(e,n)};var p=_(r("1UHsN")),v=_(r("ffZzF"));function _(e){return e&&e.__esModule?e:{default:e}}var m={};Object.defineProperty(m,"__esModule",{value:!0}),m.default=function(e,t,n){h.default(e,t),t.set(e,n)};var f,h=(f=r("5k7tO"))&&f.__esModule?f:{default:f};var y=r("a2hTj"),g=(s=r("2TvXO"),r("iqi4A")),b=r("dIxxU").default,w=new WeakMap,k=new WeakMap,x=new WeakMap,S=function(){"use strict";function t(){e(u)(this,t),e(m)(this,w,{writable:!0,value:{params:{api_key:g.API_KEY,query:"",page:1,include_adult:!1}}}),e(m)(this,k,{writable:!0,value:{params:{api_key:g.API_KEY}}}),e(m)(this,x,{writable:!0,value:{params:{api_key:g.API_KEY}}})}return e(y)(t,[{key:"fetchGenres",value:function(){var t=this;return e(o)(e(s).mark((function n(){var a,r,o;return e(s).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=g.urls.BASE_URL+g.urls.GENRES_PATH_URL,n.prev=1,n.next=4,b.get(a,e(d)(t,k));case 4:return r=n.sent,o=r.data.genres,n.abrupt("return",o);case 9:n.prev=9,n.t0=n.catch(1),console.error(n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()}},{key:"fetchTrendingMovies",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(o)(e(s).mark((function n(){var a,r,o;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.urls.BASE_URL+g.urls.TRENDINGS_PATH_URL,r={params:{api_key:g.API_KEY,page:t}},e.prev=1,e.next=4,b.get(a,r);case 4:return o=e.sent,e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),n,null,[[1,8]])})))()}},{key:"fetchMoviesByName",value:function(){var t=this;return e(o)(e(s).mark((function n(){var a,r;return e(s).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=g.urls.BASE_URL+g.urls.SEARCH_PATH_URL,n.prev=1,n.next=4,b.get(a,e(d)(t,w));case 4:return r=n.sent,n.abrupt("return",r);case 8:n.prev=8,n.t0=n.catch(1),console.error(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()}},{key:"getMoviesByName",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this;return e(o)(e(s).mark((function r(){var o,c;return e(s).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e(d)(a,w).params.query=t,e(d)(a,w).params.page=n,o=g.urls.BASE_URL+g.urls.SEARCH_PATH_URL,r.next=5,b.get(o,e(d)(a,w));case 5:return c=r.sent,r.abrupt("return",c.data);case 7:case"end":return r.stop()}}),r)})))()}},{key:"fetchMoviesByID",value:function(t){var n=this;return e(o)(e(s).mark((function a(){var r,o;return e(s).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=g.urls.BASE_URL+g.urls.GET_MOVIE_DETAILS_PATH_URL+t,a.prev=1,a.next=4,b.get(r,e(d)(n,x));case 4:return o=a.sent,a.abrupt("return",o.data);case 8:a.prev=8,a.t0=a.catch(1),console.error(a.t0);case 11:case"end":return a.stop()}}),a,null,[[1,8]])})))()}},{key:"catch",value:function(e){console.error(e)}}]),t}(),L=new S;function E(){return(E=e(o)(e(s).mark((function t(n){var a,r,o;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a=n.currentTarget.elements.searchQuery.value.trim().toLowerCase()){e.next=5;break}return alert("Enter a search query!"),e.abrupt("return");case 5:return e.next=7,L.getMoviesByName(a);case 7:0===(r=e.sent).total_results?l.classList.remove("visually-hidden"):(T(),o=q(r),c.insertAdjacentHTML("beforeend",o));case 9:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function q(e){return e.results.map((function(e){var t=e.poster_path,n=e.original_title,a=e.genre_ids,r=e.release_date.substring(0,4),o="".concat("https://image.tmdb.org/t/p/original").concat(t);return null===t&&(o="https://i.postimg.cc/zG4yJ7P4/No-Image-Available.jpg"),'<li class="hero__movie-item">\n<div class="gallery__section">\n    <ul class="gallery__card">\n        <li class="gallery-list list">\n            <div class="gallary__titular">\n                <img src="'.concat(o,'" width="395" alt="').concat(n,'" class="gallery__img">\n        </li>\n        </div>\n        <div class="gallary__info">\n            <p class="card__name">').concat(n,'</p>\n            <p class="card__info">').concat(a," , ").concat(r,"</p>\n        </div>\n    </ul>\n</div>\n</li>")})).join("")}function T(){c.innerHTML=""}i.addEventListener("submit",(function(e){return E.apply(this,arguments)}));o=r("bpxeT"),s=r("2TvXO"),g=r("iqi4A");function A(e){return e.map((function(e){e.genre_ids;var t=e.title,n=e.poster_path;e.release_date;return'<li class="card__item">\n  <div class="card__img-wrap">\n    <img\n      src="'.concat(g.urls.BASE_IMAGE_URL).concat(n,'"\n      alt="').concat(t,'"\n      class="card__img"\n    />\n  </div>\n  <div class="card__text-wrap">\n    <h2 class="card__name">').concat(t,'</h2>\n    <div class="card__info">\n      <p class="card__genres">Drama, Action<span class="card__year"></span></p>\n      <p class="card__year">2022</p>\n    </div>\n  </div>\n</li>')})).join("")}var M=new S;function B(){return(B=e(o)(e(s).mark((function t(){var n,a,r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.fetchTrendingMovies();case 2:n=e.sent,a=n.data.results,localStorage.setItem("trendingFilms",JSON.stringify(a)),r=A(a),c.insertAdjacentHTML("beforeend",r);case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}document.addEventListener("DOMContentLoaded",(function(){return B.apply(this,arguments)})),r("ewLqX");u=r("8MBJY"),y=r("a2hTj");var j=new(function(){"use strict";function t(){e(u)(this,t)}return e(y)(t,[{key:"load",value:function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}}},{key:"save",value:function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error("Set state error: ",e.message)}}},{key:"remove",value:function(e){try{localStorage.removeItem(e)}catch(e){console.error("Get state error: ",e.message)}}}]),t}()),O={body:document.body,openBtn:document.querySelector("button[data-modal-open]"),closeBtn:document.querySelector("button[data-modal-close]"),backdrop:document.querySelector("div[data-modal]")};O.openBtn.addEventListener("click",(function(){O.backdrop.classList.remove("is-hidden")})),O.closeBtn.addEventListener("click",(function(){O.backdrop.classList.add("is-hidden")}));var I={body:document.body,openBtn:document.querySelector("button[data-modal-open]"),closeBtn:document.querySelector("button[data-modal-close]"),backdrop:document.querySelector("div[data-modal]"),modal:document.querySelector("div.js-movie-card"),containerForInfo:document.querySelector("div.modal__container")},P="https://image.tmdb.org/t/p/",N="original",R="w342",U="w780",H=null;!function(e){e.id;var t,n=e.title,a=e.original_title,r=e.overview,o=e.poster_path,s=(e.genre_ids,e.popularity),c=e.vote_average,i=e.vote_count;H='<div class="modal__content">\n  <div class="img-thumb">\n    <picture class="main-modal-img">\n      <source\n        srcset="'.concat(P).concat(N).concat(o,'"\n        media="(min-width: 1024px)"\n      />\n      <source\n        srcset="\n          ').concat(P).concat(U).concat(o,"  1x,\n          ").concat(P).concat(N).concat(o,' 2x\n        "\n        media="(min-width: 768px)"\n      />\n      <source\n        srcset="\n          ').concat(P).concat(R).concat(o," 1x,\n          ").concat(P).concat(U).concat(o,' 2x\n        "\n        media="(min-width: 320px)"\n      />\n\n      <img\n        src="').concat(P).concat(R).concat(o,'"\n        alt="').concat(n,'"\n        class="main-modal-img"\n      />\n    </picture>\n  </div>\n  <div class="modal__info-container">\n    <h2 class="modal__title">').concat(n,'</h2>\n    <table class="modal__stats">\n      <tr class="stats__row">\n        <td class="stats__name">Vote</td>\n        <td class="stats__value">\n          <span class="accent-num">').concat(c,'</span> /\n          <span class="grey-num">').concat(i,'</span>\n        </td>\n      </tr>\n      <tr class="stats__row">\n        <td class="stats__name">Popularity</td>\n        <td class="stats__value">').concat(s,'</td>\n      </tr>\n      <tr class="stats__row">\n        <td class="stats__name">Original Title</td>\n        <td class="stats__value">').concat(a,'</td>\n      </tr>\n      <tr class="stats__row">\n        <td class="stats__name">Genre</td>\n        <td class="stats__value">????</td>\n      </tr>\n    </table>\n\n    <section class="modal__about">\n      <h3 class="about__title">About</h3>\n      <p class="about__text">').concat(r,'</p>\n    </section>\n    <div class="modal__buttons">\n      <button\n        type="button"\n        class="modal__btn modal__btn--orange"\n        data-modal-watched\n      >\n        add to watched\n      </button>\n      <button\n        type="button"\n        class="modal__btn modal__btn--light"\n        data-modal-queue\n      >\n        add to queue\n      </button>\n    </div>\n  </div>\n</div>'),t=H,I.containerForInfo.innerHTML=t}({adult:!1,backdrop_path:"/bUjPcNS8GweBh5Nxp8oq9Dy712Z.jpg",id:913290,title:"Barbarian",original_language:"en",original_title:"Barbarian",overview:"In town for a job interview, a young woman arrives at her Airbnb late at night only to find that it has been mistakenly double-booked and a strange man is already staying there. Against her better judgement, she decides to stay the night anyway, but soon discovers that there is much more to be afraid of in the house than the other guest.",poster_path:"/idT5mnqPcJgSkvpDX7pJffBzdVH.jpg",media_type:"movie",genre_ids:[27,9648,53],popularity:376.929,release_date:"2022-09-08",video:!1,vote_average:7.191,vote_count:207});var D="watched";function G(e){var t=j.load(D),n=t.find((function(t){return t.id===e.id}));if(n){var a=t.indexOf(n);t.splice(a,1),j.save(D,t)}else t.push(e),j.save(D,t)}var F="queue";function J(e){var t=j.load(F),n=t.find((function(t){return t.id===e.id}));if(n){var a=t.indexOf(n);t.splice(a,1),j.save(F,t)}else t.push(e),j.save(F,t)}function C(){I.backdrop.classList.add("is-hidden"),I.modal.classList.remove("is-open"),I.body.classList.remove("modal-shown"),I.body.removeEventListener("click",X),window.removeEventListener("keydown",Y)}function X(e){"backdrop"===e.target.className&&C()}function Y(e){"Escape"===e.code&&C()}I.openBtn.addEventListener("click",(function(e){I.backdrop.classList.remove("is-hidden"),I.modal.classList.add("is-open"),I.body.classList.add("modal-shown"),I.body.addEventListener("click",X),window.addEventListener("keydown",Y),t=document.querySelector("button[data-modal-queue]"),n=document.querySelector("button[data-modal-watched]"),t.addEventListener("click",J),n.addEventListener("click",G),function(){var e=j.load(D);e=e||[],j.save(D,e);var t=j.load(F);t=t||[],j.save(F,t)}();var t,n})),I.closeBtn.addEventListener("click",C);o=r("bpxeT"),s=r("2TvXO");var z=new S;function K(){return(K=e(o)(e(s).mark((function t(){var n;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.fetchTrendingMovies();case 2:n=e.sent,j.save("trendingFilms",n.data.results);case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}!function(){K.apply(this,arguments)}()}();
//# sourceMappingURL=index.0eb93618.js.map
