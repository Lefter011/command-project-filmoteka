!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequire62cb;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},t.parcelRequire62cb=r),r.register("1UHsN",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}})),r.register("ffZzF",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}})),r.register("5k7tO",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),r("2p6Fd");var s=r("bpxeT"),o=r("2TvXO"),c=(document.querySelector(".button--up"),document.querySelector(".js-gallery")),i=(document.querySelector(".pag"),document.querySelector(".search-form")),l=(document.querySelector(".js-movie-card"),document.querySelector("#accordion"),document.querySelector(".js-spinner"),document.querySelector("#header"),document.querySelector(".alert-a")),d=document.querySelector(".alert-b"),u=(document.querySelector(".header-buttons"),document.querySelectorAll(".header-button"),r("iqi4A")),p=(s=r("bpxeT"),r("8MBJY")),m={};Object.defineProperty(m,"__esModule",{value:!0}),m.default=function(e,t){var n=v.default(e,t,"get");return _.default(e,n)};var v=f(r("1UHsN")),_=f(r("ffZzF"));function f(e){return e&&e.__esModule?e:{default:e}}var h={};Object.defineProperty(h,"__esModule",{value:!0}),h.default=function(e,t,n){b.default(e,t),t.set(e,n)};var y,b=(y=r("5k7tO"))&&y.__esModule?y:{default:y};var g=r("a2hTj"),w=(o=r("2TvXO"),u=r("iqi4A"),r("dIxxU").default),x=new WeakMap,L=new WeakMap,S=new WeakMap,k=function(){"use strict";function t(){e(p)(this,t),e(h)(this,x,{writable:!0,value:{params:{api_key:u.API_KEY,query:"",page:1,include_adult:!1}}}),e(h)(this,L,{writable:!0,value:{params:{api_key:u.API_KEY}}}),e(h)(this,S,{writable:!0,value:{params:{api_key:u.API_KEY}}})}return e(g)(t,[{key:"fetchGenres",value:function(){var t=this;return e(s)(e(o).mark((function n(){var a,r,s;return e(o).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=u.urls.BASE_URL+u.urls.GENRES_PATH_URL,n.prev=1,n.next=4,w.get(a,e(m)(t,L));case 4:return r=n.sent,s=r.data.genres,n.abrupt("return",s);case 9:n.prev=9,n.t0=n.catch(1),console.error(n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()}},{key:"fetchTrendingMovies",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(s)(e(o).mark((function n(){var a,r,s;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.urls.BASE_URL+u.urls.TRENDINGS_PATH_URL,r={params:{api_key:u.API_KEY,page:t}},e.prev=1,e.next=4,w.get(a,r);case 4:return s=e.sent,e.abrupt("return",s);case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),n,null,[[1,8]])})))()}},{key:"fetchMoviesByName",value:function(){var t=this;return e(s)(e(o).mark((function n(){var a,r;return e(o).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=u.urls.BASE_URL+u.urls.SEARCH_PATH_URL,n.prev=1,n.next=4,w.get(a,e(m)(t,x));case 4:return r=n.sent,n.abrupt("return",r);case 8:n.prev=8,n.t0=n.catch(1),console.error(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()}},{key:"getMoviesByName",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this;return e(s)(e(o).mark((function r(){var s,c;return e(o).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e(m)(a,x).params.query=t,e(m)(a,x).params.page=n,s=u.urls.BASE_URL+u.urls.SEARCH_PATH_URL,r.next=5,w.get(s,e(m)(a,x));case 5:return c=r.sent,r.abrupt("return",c.data);case 7:case"end":return r.stop()}}),r)})))()}},{key:"fetchMoviesByID",value:function(t){var n=this;return e(s)(e(o).mark((function a(){var r,s;return e(o).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=u.urls.BASE_URL+u.urls.GET_MOVIE_DETAILS_PATH_URL+t,a.prev=1,a.next=4,w.get(r,e(m)(n,S));case 4:return s=a.sent,a.abrupt("return",s.data);case 8:a.prev=8,a.t0=a.catch(1),console.error(a.t0);case 11:case"end":return a.stop()}}),a,null,[[1,8]])})))()}},{key:"catch",value:function(e){console.error(e)}}]),t}();function E(e,t){for(var n=JSON.parse('{"genres":[{"id":28,"name":"Action"},{"id":12,"name":"Adventure"},{"id":16,"name":"Animation"},{"id":35,"name":"Comedy"},{"id":80,"name":"Crime"},{"id":99,"name":"Documentary"},{"id":18,"name":"Drama"},{"id":10751,"name":"Family"},{"id":14,"name":"Fantasy"},{"id":36,"name":"History"},{"id":27,"name":"Horror"},{"id":10402,"name":"Music"},{"id":9648,"name":"Mystery"},{"id":10749,"name":"Romance"},{"id":878,"name":"Science Fiction"},{"id":10770,"name":"TV Movie"},{"id":53,"name":"Thriller"},{"id":10752,"name":"War"},{"id":37,"name":"Western"}]}').genres,a=[],r=0;r<t&&r<e.length;r+=1){var s=!0,o=!1,c=void 0;try{for(var i,l=n[Symbol.iterator]();!(s=(i=l.next()).done);s=!0)genre=i.value,e[r]===genre.id&&a.push(genre.name)}catch(e){o=!0,c=e}finally{try{s||null==l.return||l.return()}finally{if(o)throw c}}}return e.length>t&&a.splice(t-1,1,"Other"),a.join(" ")}var T=new k;function A(){return(A=e(s)(e(o).mark((function t(n){var a,r,s;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a=n.currentTarget.elements.searchQuery.value.trim().toLowerCase()){e.next=6;break}return l.classList.add("visually-hidden"),d.classList.remove("visually-hidden"),e.abrupt("return");case 6:return e.next=8,T.getMoviesByName(a);case 8:0===(r=e.sent).total_results?(d.classList.add("visually-hidden"),l.classList.remove("visually-hidden")):(l.classList.add("visually-hidden"),d.classList.add("visually-hidden"),M(),s=q(r),c.insertAdjacentHTML("beforeend",s));case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function q(e){return e.results.map((function(e){var t=e.poster_path,n=e.original_title,a=e.genre_ids,r=e.release_date,s=e.id,o=r.substring(0,4),c=E(a,3),i="".concat(u.urls.BASE_IMAGE_URL).concat(t);return null===t&&(i="https://i.postimg.cc/zG4yJ7P4/No-Image-Available.jpg"),'<li class="card__item">\n  <div class="card__img-wrap">\n    <img\n      src="'.concat(i,'"\n      alt="').concat(n,'"\n      class="card__img"\n    />\n  </div>\n  <div class="card__text-wrap">\n    <h2 class="card__name">').concat(n,'</h2>\n    <div class="card__info">\n      <p class="visually-hidden">').concat(s,'</p>\n      <p class="card__genres">').concat(c,'</p>\n      <p class="card__year">').concat(o,"</p>\n    </div>\n  </div>\n</li>")})).join("")}function M(){c.innerHTML=""}i.addEventListener("submit",(function(e){return A.apply(this,arguments)}));s=r("bpxeT"),o=r("2TvXO"),u=r("iqi4A");function j(e){return e.map((function(e){e.genre_ids;var t=e.title,n=e.poster_path;e.release_date;return'<li class="card__item">\n  <div class="card__img-wrap">\n    <img\n      src="'.concat(u.urls.BASE_IMAGE_URL).concat(n,'"\n      alt="').concat(t,'"\n      class="card__img"\n    />\n  </div>\n  <div class="card__text-wrap">\n    <h2 class="card__name">').concat(t,'</h2>\n    <div class="card__info">\n      <p class="card__genres">Drama, Action<span class="card__year"></span></p>\n      <p class="card__year">2022</p>\n    </div>\n  </div>\n</li>')})).join("")}var U=new k;function O(){return(O=e(s)(e(o).mark((function t(){var n,a,r;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.fetchTrendingMovies();case 2:n=e.sent,a=n.data.results,localStorage.setItem("trendingFilms",JSON.stringify(a)),r=j(a),c.insertAdjacentHTML("beforeend",r);case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}document.addEventListener("DOMContentLoaded",(function(){return O.apply(this,arguments)})),r("ewLqX"),r("4pmU7");var B={body:document.body,openBtn:document.querySelector("button[data-modal-open]"),closeBtn:document.querySelector("button[data-modal-close]"),backdrop:document.querySelector("div[data-modal]")};B.openBtn.addEventListener("click",(function(){B.backdrop.classList.remove("is-hidden")})),B.closeBtn.addEventListener("click",(function(){B.backdrop.classList.add("is-hidden")}));var R,H={body:document.body,openBtn:document.querySelector("button[data-modal-open]"),closeBtn:document.querySelector("button[data-modal-close]"),backdrop:document.querySelector("div[data-modal]"),modal:document.querySelector("div.js-movie-card"),containerForInfo:document.querySelector("div.modal__container")},N=r("69Wut"),P="https://image.tmdb.org/t/p/",I="original",D="w342",C="w780",F=r("WMajR").compile('<div class="modal__content">\n  <div class="img-thumb">\n  {{#if poster_path}}\n    <picture class="main-modal-img">\n      <source\n        srcset="'.concat(P).concat(I,'{{poster_path}}"\n        media="(min-width: 1024px)"\n      />\n      <source\n        srcset="\n          ').concat(P).concat(C,"{{poster_path}}  1x,\n          ").concat(P).concat(I,'{{poster_path}} 2x\n        "\n        media="(min-width: 768px)"\n      />\n      <source\n        srcset="\n          ').concat(P).concat(D,"{{poster_path}} 1x,\n          ").concat(P).concat(C,'{{poster_path}} 2x\n        "\n        media="(min-width: 320px)"\n      />\n\n      <img\n        src="').concat(P).concat(D,'{{poster_path}}"\n        alt="{{title}}"\n        class="main-modal-img"\n      />\n    </picture>\n    {{else}}\n      <img\n      src=\'https://cdn.pixabay.com/photo/2014/03/25/16/27/movie-297135_960_720.png\'\n          alt="{{title}}"\n          class="main-modal-img"\n        />\n    {{/if}}\n  </div>\n  <div class="modal__info-container">\n    <h2 class="modal__title">{{title}}</h2>\n    <table class="modal__stats">\n      <tr class="stats__row">\n        <td class="stats__name">Vote</td>\n        <td class="stats__value">\n          <span class="accent-num">{{vote_average}}</span> /\n          <span class="grey-num">{{vote_count}}</span>\n        </td>\n      </tr>\n      <tr class="stats__row">\n        <td class="stats__name">Popularity</td>\n        <td class="stats__value">{{popularity}}</td>\n      </tr>\n      <tr class="stats__row">\n      {{#if original_title}}\n        <td class="stats__name">Original Title</td>\n        <td class="stats__value">{{original_title}}</td>\n        {{else}}\n        <td class="stats__name">Title</td>\n        <td class="stats__value">{{title}}</td>\n        {{/if}}\n      </tr>\n      <tr class="stats__row">\n      {{#if genre_ids}}\n        <td class="stats__name">Genre</td>\n        <td class="stats__value">{{genre_ids}}</td>\n      {{/if}}\n      </tr>\n    </table>\n\n    <section class="modal__about">\n      <h3 class="about__title">About</h3>\n      <p class="about__text">{{overview}}</p>\n    </section>\n    <div class="modal__buttons">\n      <button\n        type="button"\n        class="modal__btn modal__btn--orange"\n        data-modal-watched\n      >\n        add to watched\n      </button>\n      <button\n        type="button"\n        class="modal__btn modal__btn--light"\n        data-modal-queue\n      >\n        add to queue\n      </button>\n    </div>\n  </div>\n</div>'));R=F(N.films[9]),H.containerForInfo.innerHTML=R;var W=r("5N6jj"),G=r("4pmU7"),Y="queue";function K(e){var t=G.localStore.load(Y),n=t.find((function(t){return t.id===e.id}));if(n){var a=t.indexOf(n);t.splice(a,1),G.localStore.save(Y,t)}else t.push(e),G.localStore.save(Y,t)}G=r("4pmU7"),W=r("5N6jj");r("69Wut");G=r("4pmU7"),new k;function X(){H.backdrop.classList.add("is-hidden"),H.modal.classList.remove("is-open"),H.body.classList.remove("modal-shown"),H.body.removeEventListener("click",z),window.removeEventListener("keydown",J)}function z(e){"backdrop"===e.target.className&&X()}function J(e){"Escape"===e.code&&X()}H.openBtn.addEventListener("click",(function(e){e.preventDefault(),H.backdrop.classList.remove("is-hidden"),H.modal.classList.add("is-open"),H.body.classList.add("modal-shown"),H.body.addEventListener("click",z),window.addEventListener("keydown",J),t=document.querySelector("button[data-modal-queue]"),n=document.querySelector("button[data-modal-watched]"),t.addEventListener("click",K),n.addEventListener("click",W.onWatchedClick),function(){var e=G.localStore.load(W.WATCHED_KEY);e=e||[],G.localStore.save(W.WATCHED_KEY,e);var t=G.localStore.load(Y);t=t||[],G.localStore.save(Y,t)}();var t,n})),H.closeBtn.addEventListener("click",X);s=r("bpxeT"),o=r("2TvXO"),G=r("4pmU7");var V=new k;function Z(){return(Z=e(s)(e(o).mark((function t(){var n;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.fetchTrendingMovies();case 2:n=e.sent,G.localStore.save("trendingFilms",n.data.results);case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}!function(){Z.apply(this,arguments)}(),r("5N6jj")}();
//# sourceMappingURL=index.a6320e74.js.map
